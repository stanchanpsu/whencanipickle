---
const key = process.env.GOOGLE_API_KEY;
---

<style>
    iframe {
        border: 0;
        height: 400px;
    }
</style>

<iframe id="map"/>

<script define:vars={{ key }}>
    const $map = document.getElementById('map');
    const url = new URL('/maps/embed/v1/search', 'https://www.google.com');
    url.searchParams.append('key', key);
    window.addEventListener('city', ({ detail: city }) => {
        const q = encodeURIComponent(`pickleball courts ${city}`);
        url.searchParams.append('q', q);
        $map.src = url.toString();
    });
</script>
