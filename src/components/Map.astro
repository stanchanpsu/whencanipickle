---
const key = process.env.GOOGLE_API_KEY;
---

<style>
    iframe {
        border: 0;
        height: 0;
        grid-area: map;
        height: 100%;
        max-width: 400px;
    }
</style>

<iframe id="map"></iframe>

<script define:vars={{ key }}>
    const $map = document.getElementById("map");
    window.addEventListener("city", ({ detail: city }) => {
        const url = new URL("/maps/embed/v1/search", "https://www.google.com");
        url.searchParams.append("key", key);
        const q = `pickleball courts ${city}`;
        url.searchParams.append("q", q);
        $map.src = url.toString();
    });
</script>
